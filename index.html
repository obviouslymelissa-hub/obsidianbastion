<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Obsidian Bastion â€” Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --bg-dark: #0f1318;
      --bg-panel: #151821;
      --accent: #4fd1c5;
      --accent-2: #7ef0df;
      --text-main: #e6eef2;
      --text-muted: #9fb2bf;
      --border: #22272f;
      --tile-radius: 10px;
      --font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      --header-height: 110px;
      --sidebar-width: 360px;
      --content-max: 1200px;
    }

    /* Page basics */
    html,body{height:100%;margin:0;font-family:var(--font-family);background:var(--bg-dark);color:var(--text-main)}
    a { color: inherit; text-decoration: none; }
    /* Header hero */
    header {
      background:
        radial-gradient(600px 120px at 10% 30%, rgba(127,240,223,0.06), transparent 8%),
        radial-gradient(500px 100px at 90% 60%, rgba(79,209,197,0.04), transparent 6%),
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
      border-bottom: 2px solid rgba(79,209,197,0.12);
      padding: 12px 18px;
      position:relative;
      overflow:visible;
    }
    header::before{
      content:"";
      position:absolute;
      inset:auto 8% -40px 8%;
      height:160px;
      z-index:0;
      background: radial-gradient(closest-side, rgba(79,209,197,0.06), transparent 45%);
      filter: blur(28px);
      transform: translateY(8px);
      pointer-events:none;
      opacity:0.9;
      transition:opacity .4s ease;
    }

    .header-inner {
      max-width:var(--content-max);
      margin:0 auto;
      display:flex;
      align-items:center;
      gap:18px;
      justify-content:space-between;
      padding:8px 6px;
      position:relative;
      z-index:1;
      height: var(--header-height);
    }

    .hero-left { display:flex; align-items:center; gap:14px; min-width:0; }
    .hero-right { display:flex; align-items:center; margin-left:auto; gap:14px; min-width:0; }

    .emblem {
      width:72px;
      height:72px;
      flex:0 0 72px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:12px;
      /* subtle panel behind the logo; change to 'transparent' if you want full alpha */
      background: linear-gradient(135deg, rgba(127,240,223,0.06), rgba(79,209,197,0.02));
      border:1px solid rgba(127,240,223,0.08);
      box-shadow: 0 6px 20px rgba(0,0,0,0.5), 0 0 30px rgba(79,209,197,0.02) inset;
    }
    .emblem svg { width:52px;height:52px;display:block; }
    .emblem img { width:52px; height:52px; display:block; object-fit:contain; background:transparent; }

    .ship-img-wrap {
      width:96px;
      height:96px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(79,209,197,0.04), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6), 0 0 18px rgba(79,209,197,0.04) inset;
      overflow:hidden;
      transform-style:preserve-3d;
      perspective:800px;
      flex:0 0 96px;
      display:flex;
      align-items:center;
      justify-content:center;
      transition: transform .18s linear;
      position:relative;
    }
    .ship-img { width:100%; height:100%; object-fit:cover; display:block; transform-origin:center; transition: transform .28s cubic-bezier(.2,.9,.2,1); }

    /* Button styles (fixed) */
    .btn {
      background: var(--accent);
      color: var(--bg-panel);
      padding: 8px 12px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 700;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.35);
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    }
    .btn:active { transform: translateY(-1px); }
    .btn:focus {
      outline: 2px solid rgba(127,240,223,0.18);
      outline-offset: 2px;
      border-radius: 8px;
    }
    .btn.ghost { background:transparent;color:var(--text-main); border:1px solid rgba(255,255,255,0.04); padding:7px 10px; font-weight:600 }

    /* subtle sliding/floating motion for the header image */
    @keyframes headerFloat {
      0% { transform: translateY(-4px); }
      50% { transform: translateY(4px); }
      100% { transform: translateY(-4px); }
    }
    .ship-img-wrap.floating { animation: headerFloat 6s ease-in-out infinite; }

    .header-text { text-align:left; min-width:0; }
    .header-text h1 {
      margin:0;
      font-size:1.4rem;
      color:var(--text-main);
      letter-spacing:1.2px;
      font-weight:800;
      display:block;
      position:relative;
      line-height:1.05;
      white-space:normal; /* allow wrapping / stacking */
      overflow:visible;
      text-overflow:unset;
    }
    /* sheen effect on primary title */
    .header-text h1::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);
      transform: translateX(-110%);
      transition: transform .9s ease;
      pointer-events:none;
      mix-blend-mode:screen;
    }
    .header-text h1.sheen::before{
      transform: translateX(110%);
    }
    .header-text h2 {
      margin:6px 0 0 0;
      color:var(--text-muted);
      font-size:1rem;
      font-weight:700;
      letter-spacing:0.6px;
    }

    /* Main layout: content + right sidebar */
    .container {
      max-width:var(--content-max);
      margin:20px auto;
      padding:0 18px 48px;
      display: grid;
      grid-template-columns: 1fr var(--sidebar-width);
      gap: 24px;
      align-items:start;
    }

    /* content column */
    .content-column { grid-column: 1 / 2; display:flex; flex-direction:column; gap:20px; min-width:0; }

    /* ABOUT panel â€” button in normal flow, left-aligned below content */
    .about {
      background: linear-gradient(180deg, rgba(79,209,197,0.03), rgba(255,255,255,0.01));
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.45);
      display:flex;
      flex-direction:column;
      gap:12px;
      justify-content:flex-start;
    }
    /* Prevent the about-text from growing and creating space */
    .about .about-text { flex: 0 0 auto; min-width:0; }
    .about h3 { margin:0 0 6px 0;color:var(--accent);font-size:1.15rem }
    .about p { margin:0;color:var(--text-muted);line-height:1.45 }

    /* detail chips â€” highlighted boxes for designation/registry/status/authority */
    .about-chips {
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:6px 0;
    }
    .detail-chip {
      display:inline-flex;
      flex-direction:column;
      gap:4px;
      align-items:flex-start;
      padding:8px 12px;
      background: linear-gradient(180deg, rgba(127,240,223,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(127,240,223,0.06);
      border-radius:10px;
      min-width:120px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      color:var(--text-main);
    }
    .detail-chip dt { font-size:0.72rem; font-weight:700; color:var(--text-main); text-transform:uppercase; letter-spacing:0.6px; }
    .detail-chip dd { margin:0; font-size:0.95rem; color:var(--text-muted); }

    .detail-chip:hover { transform: translateY(-4px); box-shadow: 0 10px 28px rgba(0,0,0,0.45); background:linear-gradient(180deg, rgba(127,240,223,0.035), rgba(255,255,255,0.015)); }

    /* condensed Core assets into two columns */
    .core-list {
      list-style: none;
      padding:0;
      margin:12px 0 0 0;
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:8px 12px;
      align-items:start;
    }
    /* make each list row a flex row with a fixed-width label and a flexible description so text wraps cleanly */
    .core-list li { display:flex; gap:8px; align-items:flex-start; margin:0; min-width:0; }
    .core-list strong {
      color:var(--accent);
      min-width:0;
      display:inline-block;
      font-weight:700;
      flex: 0 0 150px; /* fixed-ish label width so descriptions line up */
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .core-list .core-desc {
      color:var(--text-muted);
      flex: 1 1 auto;
      min-width:0; /* allow the description to shrink/wrap within the grid column */
    }

    /* area to show chip info */
    .detail-info {
      margin-top:10px;
      color:var(--text-muted);
      font-size:0.92rem;
      min-height:22px;
      opacity:0;
      transition: opacity .18s ease, transform .18s ease;
      transform: translateY(6px);
    }
    .detail-info.show { opacity:1; transform: none; }

    /* Button flows inline below content and left-aligned */
    .about .about-actions { display:flex; gap:10px; align-items:center; margin-top:8px; justify-content:flex-start; }

    .panel {
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.35);
    }
    .panel h3 { margin:0 0 10px 0;color:var(--accent);font-size:1.15rem }

    /* Systems-dock / tile styling */
    .systems-dock {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .tile {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid var(--border);
      border-radius: var(--tile-radius);
      padding:12px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      min-height:96px;
      transform-origin:center;
      transition: transform .16s ease, box-shadow .16s ease;
      will-change: transform;
    }
    .tile.main {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 16px;
      padding: 16px;
      min-height:120px;
    }
    .tile-head { display:flex; gap:12px; align-items:center }
    .tile-icon {
      width:48px;height:48px;border-radius:10px;background:rgba(79,209,197,0.06);display:flex;align-items:center;justify-content:center;font-size:20px;color:var(--accent)
    }
    .tile-title { font-weight:700; font-size:1rem }
    .tile-desc { color:var(--text-muted); font-size:0.9rem; margin-top:4px }

    .tile-actions { display:flex; gap:8px; align-items:center }

    .tile:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 10px 30px rgba(0,0,0,0.45); }

    /* Gallery */
    .gallery-grid {
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:2px;
    }
    .gallery-grid .thumb {
      width:220px;
      height:140px;
      object-fit:cover;
      border-radius:8px;
      border: 1px solid rgba(0,0,0,0.06);
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease;
      display:block;
    }
    .gallery-grid .thumb:focus,
    .gallery-grid .thumb:hover { transform: translateY(-6px); box-shadow: 0 8px 24px rgba(0,0,0,0.5); outline: none; }

    @media (min-width: 1100px) {
      .gallery-grid .thumb { width:240px; height:156px; }
    }

    /* Sidebar */
    aside { grid-column: 2 / 3; display:flex; flex-direction:column; gap:16px; min-width:0; }

    .side-stack { display:flex; flex-direction:column; gap:12px }

    .small-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px }
    .small-item { display:flex; gap:10px; align-items:flex-start }

    .thumb { width:56px;height:36px;border-radius:6px;background:rgba(255,255,255,0.02); object-fit:cover; }

    .lightbox {
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.85);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:1200;
      padding:24px;
    }
    .lightbox.open { display:flex; }

    .lb-content {
      max-width: 92vw;
      max-height: 82vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
    }
    .lb-content img {
      max-width: 100%;
      max-height: calc(82vh - 80px);
      object-fit:contain;
      border-radius:8px;
      box-shadow: 0 8px 40px rgba(0,0,0,0.6);
      background: #000;
    }
    .lb-caption {
      color:var(--text-muted);
      font-size:0.95rem;
      text-align:center;
      max-width:92vw;
    }

    .lb-close, .lb-prev, .lb-next {
      position:absolute;
      background:transparent;
      color:var(--text-main);
      border:0;
      font-size:28px;
      cursor:pointer;
      padding:12px;
      line-height:1;
    }
    .lb-close { top:18px; right:22px; font-size:30px; }
    .lb-prev { left:18px; top:50%; transform:translateY(-50%); }
    .lb-next { right:18px; top:50%; transform:translateY(-50%); }

    .lb-close:focus, .lb-prev:focus, .lb-next:focus { outline:2px solid rgba(79,209,197,0.28); border-radius:8px; }

    /* Footer quote styling */
    footer { text-align:center;color:var(--text-muted);padding:24px 0 40px;border-top:1px solid var(--border);margin-top:18px;font-style:italic }

    /* Responsiveness */
    @media (max-width:1000px){
      .container { grid-template-columns: 1fr; padding-bottom:28px }
      .content-column { grid-column: 1 / -1; }
      aside { grid-column: 1 / -1; }
      .header-inner { justify-content:flex-start; gap:12px; }
      .hero-right { margin-left:0; order:2; } /* keep ship image below on narrow screens */
      .header-text h1 { font-size:1.25rem; white-space:normal; }
      .header-text h2 { font-size:0.95rem; }
      .gallery-grid .thumb { width:160px; height:104px; }
      header::before { display:none; }
      .about { min-height:unset; padding-bottom:18px; }
      .core-list { grid-template-columns: 1fr; }
      /* Ensure button stays in flow on small screens */
      .about .about-actions { position:static; margin-top:12px; }
    }
    @media (max-width:600px){
      .systems-dock { grid-template-columns: 1fr }
      .ship-img { width:72px; height:72px; flex:0 0 72px; }
      .header-inner { gap:12px; padding:6px; }
      .gallery-grid { justify-content:center; }
      .gallery-grid .thumb { width:140px; height:90px; }
      .emblem { display:none; }
      .ship-img-wrap { width:72px; height:72px; border-radius:12px; flex:0 0 72px; }
      .header-inner { height:84px; }
      .about { flex-direction:column; align-items:flex-start; }
      .about .about-actions { align-self:flex-start; margin-left:0; width:100%; justify-content:flex-start; margin-top:12px; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .ship-img-wrap.floating { animation: none; }
      .header-text h1::before { transition:none; transform:none; display:none; }
      .ship-img-wrap, .ship-img { transition: none; }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner" role="banner" aria-label="Obsidian Bastion header">
      <!-- Left side: emblem + stacked title -->
      <div class="hero-left" style="min-width:0">
        <div class="emblem" aria-hidden="true" title="Obsidian Bastion emblem">
          <img class="emblem-img" id="emblemImg" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/StrOpBoard.png" alt="Strategic Operations Board image placeholder">
        </div>

        <div class="header-text" style="min-width:0" aria-label="Site title">
          <!-- Primary title kept with id for sheen script -->
          <h1 id="siteTitle">Obsidian Bastion</h1>
          <h2>Registry &amp; Operations</h2>
        </div>
      </div>

      <!-- Right side: ship image -->
      <div class="hero-right" aria-hidden="false">
        <div class="ship-img-wrap floating" id="shipWrap">
          <img class="ship-img" id="shipImg" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-header.jpg" alt="Obsidian Bastion ship image placeholder">
        </div>
      </div>
    </div>
  </header>

  <main class="container" aria-live="polite">
    <div class="content-column">
      <!-- ABOUT -->
      <section class="about" role="region" aria-labelledby="about-title">
        <div class="about-text">
          <h3 id="about-title">Vessel Profile: Obsidian Bastion</h3>

          <div class="about-chips" role="list" aria-label="Ship details">
            <button class="detail-chip" data-info="A long-range exploration cruiser built for extended missions and resilience.">
              <dt>Designation</dt>
              <dd>Exploration Cruiser</dd>
            </button>

            <button class="detail-chip" data-info="Registered as an active service vessel in the Family Fleet.">
              <dt>Registry</dt>
              <dd>Active Service Vessel</dd>
            </button>

            <button class="detail-chip" data-info="Ship status: Ready for deployment and operations.">
              <dt>Status</dt>
              <dd>Functional</dd>
            </button>

            <button class="detail-chip" data-info="Primary command sits on the bridge â€” responsible for mission direction and safety.">
              <dt>Under the Authority of</dt>
              <dd>Strategic Operations Board</dd>
            </button>
          </div>

          <p>
            Commissioned for Extended Missions and Tactical Reliability.
          </p>

          <h4 style="margin:12px 0 6px 0;color:var(--text-main)">Core assets</h4>
          <ul class="core-list" aria-label="Core assets">
            <li><strong>Mission:</strong> <span class="core-desc">Exploration, Navigation & Tactical Relay</span></li>
            <li><strong>Mainframe:</strong> <span class="core-desc">Telemetry & comms</span></li>
            <li><strong>Engineering:</strong> <span class="core-desc">Modular repair hub</span></li>
            <li><strong>Computer:</strong> <span class="core-desc">Continuous system monitoring</span></li>
            <li><strong>Defense:</strong> <span class="core-desc">Lasers & shields</span></li>
            <li><strong>Crew Quarters:</strong> <span class="core-desc">Fortified for Comfort & Security</span></li>
          </ul>

          <div id="detailInfo" class="detail-info" aria-live="polite"></div>
        </div>

        <div class="about-actions" aria-hidden="false">
          <a class="btn" href="https://obviouslymelissa-hub.github.io/obsidianbastion/crew.html" aria-label="Meet our crew">Meet our crew</a>
          <a class="btn ghost" href="https://obviouslymelissa-hub.github.io/obsidianbastion/achievements.html" aria-label="View achievements">View achievements</a>
        </div>
      </section>

      <!-- Gallery -->
      <section class="panel" aria-labelledby="gallery-title">
        <h3 id="gallery-title">Registry Images</h3>
        <div class="gallery-grid" id="gallery">
          <img class="thumb" data-index="0" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-3.jpg" alt="Exterior â€” view" tabindex="0" />
          <img class="thumb" data-index="1" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/parked.jpg" alt="Parked â€” exterior view" tabindex="0" />
          <img class="thumb" data-index="2" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-1.jpg" alt="Command Deck â€” interior view" tabindex="0" />
          <img class="thumb" data-index="3" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-2.jpg" alt="Observation Dome â€” interior view" tabindex="0" />
          <img class="thumb" data-index="4" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/lounge.jpg" alt="Lounge â€” interior view" tabindex="0" />
          <img class="thumb" data-index="5" src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/quarters.jpg" alt="Quarters â€” interior view" tabindex="0" />
        </div>
      </section>
    </div>

    <!-- Sidebar -->
    <aside aria-label="Right sidebar">
      <div class="side-stack">
        <div class="panel" aria-labelledby="systems-title">
          <h3 id="systems-title">System Access - RESTRICTED: Authorized Personnel Use</h3>
          <div class="systems-dock" role="list">
            <div class="tile main" role="listitem" aria-label="Onboard Computer">
              <div style="display:flex;gap:14px;align-items:center;">
                <div class="tile-icon" aria-hidden="true">ðŸ’»</div>
                <div>
                  <div class="tile-title">Onboard Computer</div>
                  <div class="tile-desc">Primary control interface â€” main console and mission controls.</div>
                </div>
              </div>
              <div class="tile-actions">
                <a class="btn" href="https://obviouslymelissa-hub.github.io/obsidianbastion/onboardcomputer.html" aria-label="Open Onboard Computer">Open</a>
              </div>
            </div>
          </div>
        </div>

        <div class="panel" aria-labelledby="alerts-title">
          <h3 id="alerts-title">Notifications &amp; Events</h3>

          <h4 style="margin:0 0 8px 0;color:var(--text-main)">Upcoming Events</h4>
          <ul class="small-list" style="margin-top:10px">
            <li class="small-item">
              <div style="flex:1">
                <strong>MISSION: Captain Carter's 8th Birthday Celebration</strong>
                <div style="color:var(--text-muted);font-size:0.9rem">MISSION CODE: OB-CCBC-08<br>
                MISSION LAUNCH: 22 Jan 2026, 17:30 PST (Earth)<br>
                AUTHORIZED PERSONNEL ONLY<br>
                Passengers to remain onboard.<br>
                Vistor passes have been reviewed and issued.<br>
                Assembly to be held in Conference Room: CLASSIFIED</div>
              </div>
            </li>
            <li class="small-item">
              <div style="flex:1">
                <strong>Mechanic Nima's Birthday</strong>
                <div style="color:var(--text-muted);font-size:0.9rem">22 Jan 2026 (Earth)<br>
                Acknowledgments to be held during MISSION: OB-CCBC-08</div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </aside>
  </main>

  <!-- Lightbox / slideshow markup -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Image viewer">
    <button class="lb-close" id="lbClose" aria-label="Close viewer">&times;</button>
    <button class="lb-prev" id="lbPrev" aria-label="Previous image">â€¹</button>

    <div class="lb-content" role="document">
      <img id="lbImage" src="" alt="">
      <div id="lbCaption" class="lb-caption" aria-live="polite"></div>
    </div>

    <button class="lb-next" id="lbNext" aria-label="Next image">â€º</button>
  </div>

  <footer>
    &copy; 2026 - Turning Imagination Into Galactic Frontiers.
  </footer>

  <!-- Header interactivity + lightbox scripts (parallax + sheen preserved) -->
  <script>/* header parallax / sheen script (unchanged) */ (function () {
      const shipWrap = document.getElementById('shipWrap');
      const shipImg = document.getElementById('shipImg');
      const siteTitle = document.getElementById('siteTitle');
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const isTouch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;
      if (!reduce && !isTouch && shipWrap && shipImg) {
        const maxRotate = 6;
        const maxTranslate = 6;
        function onMove(e) {
          const rect = shipWrap.getBoundingClientRect();
          const cx = rect.left + rect.width / 2;
          const cy = rect.top + rect.height / 2;
          const clientX = e.clientX || (e.touches && e.touches[0].clientX);
          const clientY = e.clientY || (e.touches && e.touches[0].clientY);
          const dx = (clientX - cx) / rect.width;
          const dy = (clientY - cy) / rect.height;
          const rotY = dx * maxRotate;
          const rotX = -dy * maxRotate;
          const tx = dx * maxTranslate;
          const ty = dy * maxTranslate;
          shipWrap.style.transform = `translate3d(${tx}px, ${ty}px, 0) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
          shipImg.style.transform = `scale(1.02) translate3d(${tx * -0.35}px, ${ty * -0.35}px, 0)`;
        }
        function onLeave() { shipWrap.style.transform = ''; shipImg.style.transform = ''; }
        const headerInner = document.querySelector('.header-inner');
        headerInner.addEventListener('mousemove', onMove);
        headerInner.addEventListener('mouseleave', onLeave);
        headerInner.addEventListener('touchmove', onMove, { passive: true });
        headerInner.addEventListener('touchend', onLeave);
      }
      if (!reduce && siteTitle) {
        const triggerSheen = () => { siteTitle.classList.add('sheen'); setTimeout(() => siteTitle.classList.remove('sheen'), 900); };
        setTimeout(triggerSheen, 700);
        setInterval(triggerSheen, 8000);
      }
    })();</script>

  <script>
    (function(){
      // Gallery / lightbox logic â€” updated order and added parked.jpg
      const images = [
        { src: 'https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-3.jpg', caption: 'Exterior' },
        { src: 'https://obviouslymelissa-hub.github.io/obsidianbastion/images/parked.jpg', caption: 'Parked' },
        { src: 'https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-1.jpg', caption: 'Command Deck' },
        { src: 'https://obviouslymelissa-hub.github.io/obsidianbastion/images/ship-2.jpg', caption: 'Observation Dome' },
        { src: 'https://obviouslymelissa-hub.github.io/obsidianbastion/images/lounge.jpg', caption: 'Lounge' },
        { src: 'https://obviouslymelissa-hub.github.io/obsidianbastion/images/quarters.jpg', caption: 'Quarters' }
      ];

      const gallery = document.getElementById('gallery');
      const thumbs = gallery ? Array.from(gallery.querySelectorAll('.thumb')) : [];
      const lightbox = document.getElementById('lightbox');
      const lbImage = document.getElementById('lbImage');
      const lbCaption = document.getElementById('lbCaption');
      const lbClose = document.getElementById('lbClose');
      const lbPrev = document.getElementById('lbPrev');
      const lbNext = document.getElementById('lbNext');

      let current = 0;

      function openLightbox(idx) {
        current = (typeof idx === 'number') ? idx : 0;
        const item = images[current];
        lbImage.src = item.src;
        lbImage.alt = item.caption || '';
        lbCaption.textContent = item.caption || '';
        lightbox.classList.add('open');
        lightbox.setAttribute('aria-hidden', 'false');
        lbClose.focus();
        document.body.style.overflow = 'hidden';
      }

      function closeLightbox() {
        lightbox.classList.remove('open');
        lightbox.setAttribute('aria-hidden', 'true');
        lbImage.src = '';
        lbCaption.textContent = '';
        document.body.style.overflow = '';
        const thumb = thumbs[current];
        if (thumb) thumb.focus();
      }

      function showPrev() {
        current = (current - 1 + images.length) % images.length;
        updateLightbox();
      }
      function showNext() {
        current = (current + 1) % images.length;
        updateLightbox();
      }
      function updateLightbox() {
        const item = images[current];
        lbImage.src = item.src;
        lbImage.alt = item.caption || '';
        lbCaption.textContent = item.caption || '';
      }

      thumbs.forEach(t => {
        t.addEventListener('click', (e) => {
          const idx = Number(t.getAttribute('data-index'));
          openLightbox(idx);
        });
        t.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            const idx = Number(t.getAttribute('data-index'));
            openLightbox(idx);
          }
        });
      });

      lbClose.addEventListener('click', closeLightbox);
      lbPrev.addEventListener('click', showPrev);
      lbNext.addEventListener('click', showNext);

      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) closeLightbox();
      });

      document.addEventListener('keydown', (e) => {
        if (!lightbox.classList.contains('open')) return;
        if (e.key === 'Escape') closeLightbox();
        else if (e.key === 'ArrowLeft') showPrev();
        else if (e.key === 'ArrowRight') showNext();
      });

      // Preload images
      images.forEach(i => {
        const img = new Image();
        img.src = i.src;
      });

      // Detail-chip interaction: show transient contextual info
      const chips = Array.from(document.querySelectorAll('.detail-chip'));
      const infoBox = document.getElementById('detailInfo');
      let infoTimer = null;
      function showInfo(text) {
        if (!infoBox) return;
        clearTimeout(infoTimer);
        infoBox.textContent = text;
        infoBox.classList.add('show');
        infoTimer = setTimeout(() => {
          infoBox.classList.remove('show');
        }, 4200);
      }
      chips.forEach(c => {
        c.addEventListener('click', () => {
          const text = c.getAttribute('data-info') || '';
          showInfo(text);
        });
        c.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            const text = c.getAttribute('data-info') || '';
            showInfo(text);
          }
        });
      });
    })();
  </script>
</body>
</html>