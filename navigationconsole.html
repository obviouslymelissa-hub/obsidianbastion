<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Navigation Console — Obsidian Bastion</title>

  <!-- keep the external stylesheet link (used when app.css is present) -->
  <link rel="stylesheet" href="app.css">

  <!-- Embedded fallback/primary styles (adjusted to match the Mainframe Weather palette) -->
  <style>
    :root{
      --bg-dark: #0f1318;
      --bg-panel: #151821;
      --accent: #4fd1c5;
      --accent-2: #7ef0df;
      --text-main: #e6eef2;
      --text-muted: #9fb2bf;
      --border: #22272f;
      --bg:#0b0f1a; --card:#0f1724; --muted:#9aa6c0;
      --danger:#ff7b7b; --glass: rgba(255,255,255,0.03);
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
    }

    html,body{height:100%;margin:0;color:var(--text-main);background:var(--bg-dark);}
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .site-header{ background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border-bottom:1px solid rgba(255,255,255,0.03); }
    .header-inner{ max-width:1100px; margin:0 auto; padding:18px 20px; display:flex; align-items:center; justify-content:space-between; gap:12px; box-sizing:border-box; }
    .header-left{ display:flex; align-items:center; gap:12px; }
    .site-emblem img{ width:48px; height:48px; display:block; }
    .header-text h1{ margin:0; font-size:22px; }
    .header-text h2{ margin:0; font-size:14px; color:var(--muted); font-weight:500; }

    .header-right a.return-command-hub { 
      background: var(--accent); 
      color: var(--bg-panel); 
      padding: 10px 16px; 
      border-radius: 8px; 
      font-weight: 700; 
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.35);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .header-right a.return-command-hub:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    }

    .app{ max-width:1100px; margin:18px auto; padding:0 18px 28px; box-sizing:border-box; }

    .app-header{ display:flex; align-items:center; margin-bottom:12px; }
    .header-actions{ margin-left:auto; display:flex; gap:8px; align-items:center; }

    .map-large{ background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border:1px solid rgba(255,255,255,0.03); border-radius:12px; padding:12px; box-shadow:0 6px 18px rgba(2,6,23,0.6); margin-bottom:12px; overflow:hidden; }
    #mapSvgLarge{ width:100%; height:240px; display:block; }

    .status-banner{ padding:8px 12px; margin-bottom:12px; border-radius:8px; background:rgba(0,0,0,0.2); color:var(--muted); }

    .grid{ display:grid; grid-template-columns: 240px 1fr 300px; gap:14px; align-items:start; }
    .panel{ background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); box-shadow:0 6px 18px rgba(2,6,23,0.6); }
    .panel.systems, .panel.planets, .panel.details{ min-height:120px; }
    .panel.systems h2, .panel.planets h2{ margin:0 0 8px 0; font-size:18px; }
    .panel.details h3{ margin:0 0 8px 0; font-size:16px; }

    .list{ display:flex; flex-direction:column; gap:8px; max-height:360px; overflow:auto; padding-right:6px; }
    .systems .list button, .planets .list button { text-align:left; background:transparent; border:0; padding:8px; border-radius:8px; color:#bfe6ff; cursor:pointer; }
    .systems .list button:hover, .planets .list button:hover { background:rgba(255,255,255,0.02); }

    .meta{ margin-top:10px; color:var(--muted); font-size:13px; display:grid; gap:6px; }
    .muted{ color:var(--muted); font-size:13px; }

    .controls{ display:flex; gap:8px; margin-top:10px; }
    .btn{ background:var(--accent); color:var(--bg-panel); border:0; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:700; }

    .panel.custom input, .panel.custom select { background: transparent; color:inherit; border:1px solid rgba(255,255,255,0.04); padding:8px; border-radius:8px; }
    .panel.custom .small-muted{ color:var(--muted); margin-top:8px; }

    /* Favorites styles */
    .fav-list { display:flex; flex-direction:column; gap:8px; margin-top:8px; }
    .fav-item { display:flex; gap:8px; align-items:center; background:rgba(255,255,255,0.02); padding:6px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); }
    .fav-thumb { width:48px; height:48px; border-radius:6px; overflow:hidden; background:#031a2b; display:flex; align-items:center; justify-content:center; flex:0 0 48px; }
    .fav-thumb img { width:100%; height:100%; object-fit:cover; display:block; }
    .fav-meta { flex:1; display:flex; flex-direction:column; min-width:0; }
    .fav-title { color:#bfe6ff; font-weight:700; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .fav-sub { color:rgba(191,230,255,0.7); font-size:12px; }
    .fav-actions { display:flex; gap:6px; }
    .fav-actions button { padding:6px 8px; border-radius:6px; border:0; background:rgba(255,255,255,0.03); color:#bfe6ff; cursor:pointer; font-size:12px; }
    .fav-actions button.primary { background:var(--accent); color:#042023; font-weight:700; }

    /* Recently travelled list items */
    .recent-item { display:flex; gap:8px; align-items:center; background:rgba(255,255,255,0.02); padding:6px 8px; border-radius:6px; border:1px solid rgba(255,255,255,0.03); margin-bottom:6px; }
    .recent-meta { flex:1; display:flex; flex-direction:column; min-width:0; }
    .recent-name { color:#bfe6ff; font-weight:600; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .recent-detail { color:rgba(191,230,255,0.6); font-size:11px; }
    .recent-actions { display:flex; gap:4px; }
    .recent-actions button { padding:4px 8px; border-radius:4px; border:0; background:rgba(255,255,255,0.03); color:#bfe6ff; cursor:pointer; font-size:11px; }
    .recent-actions button.primary { background:var(--accent); color:#042023; font-weight:700; }

    @media (max-width:980px){
      .grid{ grid-template-columns: 1fr; }
      .header-inner{ padding:14px; }
      .saved-locations-grid { grid-template-columns: 1fr !important; }
    }
  </style>
</head>
<body>
  <!-- Shared site header -->
  <header class="site-header">
    <div class="header-inner" role="banner" aria-label="Obsidian Bastion header">
      <div class="header-left">
        <div class="site-emblem" aria-hidden="true" title="Obsidian Bastion emblem">
          <img src="https://obviouslymelissa-hub.github.io/obsidianbastion/images/StrOpBoard.png" alt="Strategic Operations Board">
        </div>
        <div class="header-text" aria-label="Site title">
          <h1>Obsidian Bastion</h1>
          <h2>Navigation Console</h2>
        </div>
      </div>
      <div class="header-right">
        <a href="https://obviouslymelissa-hub.github.io/obsidianbastion/onboardcomputer.html" class="return-command-hub" aria-label="Return to Onboard Computer">← Return</a>
      </div>
    </div>
  </header>

  <div class="app">

    <!-- Large separate map -->
    <div id="mapLarge" class="map-large panel" aria-label="Navigation Map">
      <svg id="mapSvgLarge" viewBox="0 0 1000 320" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Large star system map"></svg>
    </div>

    <!-- Overall travel/status banner -->
    <div id="overallStatus" class="status-banner muted">Status: Idle</div>

    <!-- Collapsible solar systems section wrapper -->
    <section class="panel" style="max-width:1100px;margin:0 auto 18px;padding:12px;display:block">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <h3 style="margin:0;">Solar Systems</h3>
        <button id="toggleSolarSystemsBtn" class="btn" style="padding:4px 10px;font-size:12px" title="Toggle solar systems section">▼</button>
      </div>
      <main id="solarSystemsGrid" class="grid">
        <aside class="panel systems" aria-label="Systems">
          <h2>Systems</h2>
          <div id="systemsList" class="list"></div>
        </aside>

        <section class="panel planets" aria-label="Planets">
          <h2 id="systemTitle">Select a system</h2>
          <div id="planetsList" class="list"></div>
        </section>

        <aside class="panel details" aria-label="Details">
          <div id="detailsCard">
            <h3 id="planetName">—</h3>
            <div id="planetSummary">—</div>
            <div class="meta">
              <div><strong>Type</strong> <span id="planetType">—</span></div>
              <div><strong>Orbit</strong> <span id="planetOrbit">—</span></div>
              <div><strong>Radius</strong> <span id="planetRadius">—</span></div>
            </div>

            <div class="controls">
              <button id="travelBtn" class="btn">Travel</button>
            </div>

          </div>
        </aside>
      </main>
    </section>

    <!-- Custom location / travel mode panel (separate section) -->
    <section class="panel custom" aria-label="Custom Location" style="max-width:1100px;margin:18px auto 28px;display:block">
      <h3>Go to a custom location</h3>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="customGotoInput" placeholder="Type location (e.g. Earth, Sol-03b, Kepler-452/Kepler-452b)" style="flex:1;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit" />
        <select id="travelModeSelect" title="Travel mode">
          <option value="regular">Regular</option>
          <option value="warp">Warp</option>
          <option value="hyper">Hyperwarp</option>
        </select>
        <button id="customGotoBtn" class="btn">Go</button>
      </div>
      <div class="small-muted" style="margin-top:8px">Regular = steady transit. Warp = faster with pulse. Hyperwarp = near-instant flash.</div>

      <!-- NEW: Two-column layout for Favorites and Recently Travelled -->
      <div style="margin-top:18px;display:grid;grid-template-columns:1fr 1fr;gap:16px;" class="saved-locations-grid">
        <div>
          <h4 style="margin:6px 0 10px 0">Favorites</h4>
          <div id="favoritesList" class="fav-list">No favorites yet.</div>
        </div>
        <div>
          <h4 style="margin:6px 0 10px 0">Recently Travelled</h4>
          <div id="recentlyTravelledList" class="list small-muted">No travel history yet.</div>
        </div>
      </div>
    </section>

    <footer class="app-footer" style="max-width:1100px;margin:0 auto;padding:12px 18px;color:var(--muted);font-size:13px;text-align:center;border-top:1px solid rgba(255,255,255,0.03);margin-top:18px;">
      <div style="margin-bottom:10px">
        <a href="https://obviouslymelissa-hub.github.io/obsidianbastion/index.html" style="color:var(--accent);text-decoration:none;font-weight:600">Vessel Profile</a>
      </div>
      <small style="font-style:italic">&copy; 2026 - Turning Imagination Into Galactic Frontiers.</small>
    </footer>
  </div>

  <!-- Embedded catalog fallback (expanded with nearby real systems instead of TRAPPIST-1) -->
  <script>
    window.__CATALOG__ = {
      "systems": [
        {
          "id": "Sol",
          "name": "Sol",
          "coords": [100, 80],
          "star": { "name": "Sun (G2V)", "class": "G", "luminosityFactor": 1 },
          "planets": [
            { "id": "Sol-01b", "name": "Mercury", "index": 1, "orbitalAU": 0.39, "radiusEarth": 0.383, "massEarth": 0.055, "type": "Terrestrial", "summary": "Small, cratered rocky world." },
            { "id": "Sol-02b", "name": "Venus", "index": 2, "orbitalAU": 0.72, "radiusEarth": 0.95, "massEarth": 0.82, "type": "Terrestrial", "summary": "Dense, hot atmosphere with sulfuric clouds." },
            { "id": "Sol-03b", "name": "Earth", "index": 3, "orbitalAU": 1.00, "radiusEarth": 1.00, "massEarth": 1.00, "type": "Terrestrial", "summary": "Blue planet with abundant life." },
            { "id": "Sol-04b", "name": "Mars", "index": 4, "orbitalAU": 1.52, "radiusEarth": 0.53, "massEarth": 0.107, "type": "Terrestrial", "summary": "Red dusty world with polar caps." },
            { "id": "Sol-05b", "name": "Jupiter", "index": 5, "orbitalAU": 5.20, "radiusEarth": 11.21, "massEarth": 317.8, "type": "Gas Giant", "summary": "Massive gas giant with strong storms and many moons." },
            { "id": "Sol-06b", "name": "Saturn", "index": 6, "orbitalAU": 9.58, "radiusEarth": 9.45, "massEarth": 95.2, "type": "Gas Giant", "summary": "Ringed gas giant with prominent ring system." },
            { "id": "Sol-07b", "name": "Uranus", "index": 7, "orbitalAU": 19.2, "radiusEarth": 4.01, "massEarth": 14.5, "type": "Ice Giant", "summary": "Tilted ice giant with a faint ring and cold atmosphere." },
            { "id": "Sol-08b", "name": "Neptune", "index": 8, "orbitalAU": 30.05, "radiusEarth": 3.88, "massEarth": 17.1, "type": "Ice Giant", "summary": "Windy ice giant with active storms." },
            { "id": "Sol-09b", "name": "Pluto", "index": 9, "orbitalAU": 39.5, "radiusEarth": 0.186, "massEarth": 0.0022, "type": "Dwarf", "summary": "Dwarf planet in the Kuiper belt (historical interest)." }
          ]
        },

        {
          "id": "Kepler-452",
          "name": "Kepler-452",
          "coords": [420, 80],
          "star": { "name": "Kepler-452", "class": "G", "luminosityFactor": 1.15 },
          "planets": [
            { "id": "Kepler-452-01b", "name": "Kepler-452b", "index": 1, "orbitalAU": 1.05, "radiusEarth": 1.6, "massEarth": 5.0, "type": "Super-Earth", "summary": "Potentially habitable super-Earth." },
            { "id": "Kepler-452-02b", "name": "Kepler-452c", "index": 2, "orbitalAU": 0.6, "radiusEarth": 1.0, "massEarth": 0.9, "type": "Terrestrial", "summary": "Rocky inner world, tidally active." },
            { "id": "Kepler-452-03b", "name": "Kepler-452d", "index": 3, "orbitalAU": 1.8, "radiusEarth": 2.8, "massEarth": 12.0, "type": "Sub-Neptune", "summary": "Volatile-rich world with thick atmosphere." }
          ]
        },

        /* Replaced TRAPPIST-1 with several nearby real systems (confirmed or strong candidates)
           — these are placed here so the page has familiar nearby targets for quick travel.
        */
        {
          "id": "Proxima-Centauri",
          "name": "Proxima Centauri",
          "coords": [300, 120],
          "star": { "name": "Proxima Centauri", "class": "M", "luminosityFactor": 0.0017 },
          "planets": [
            { "id": "Proxima-b", "name": "Proxima b", "index": 1, "orbitalAU": 0.0485, "radiusEarth": 1.08, "massEarth": 1.27, "type": "Terrestrial", "summary": "Rocky planet in the habitable zone (tidally locked candidate)." }
          ]
        },

        {
          "id": "Sirius-System",
          "name": "Sirius System",
          "coords": [340, 130],
          "star": { "name": "Sirius (α Canis Majoris)", "class": "A", "luminosityFactor": 25.4 },
          "planets": [
            { "id": "Sirius-A", "name": "Carter's Star (Sirius A)", "index": 1, "orbitalAU": 0, "radiusEarth": 1.71, "massEarth": 685000, "type": "Star", "summary": "Brilliant A1V-class main-sequence star (spectral type A1V, ~9,940 K), the brightest star in Earth's night sky at magnitude -1.46. Mass: 2.06 M☉. Named in honor of Captain Carter." },
            { "id": "Sirius-B", "name": "Sirius B", "index": 2, "orbitalAU": 20, "radiusEarth": 0.92, "massEarth": 338000, "type": "White Dwarf", "summary": "DA2-type white dwarf companion (spectral type DA2, ~25,200 K) orbiting Sirius A with 50-year period. Mass: 1.018 M☉. One of the nearest and most massive white dwarfs to Earth." }
          ]
        }

      ]
    };
  </script>

  <!-- Favorites integration (reads pb_favorites from localStorage and shows quick access) -->
  <script>
    // Favorites rendering is now handled by app.js renderCustomList() function
    // This keeps the favorites list persistent even after traveling
  </script>

  <!-- keep the module script for the existing interactive behaviour -->
  <script type="module" src="app.js"></script>
</body>
</html>
